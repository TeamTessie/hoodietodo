!function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?o.call(this,t):i.call(this,t)}var i=t("./helpers/add-one"),o=t("./helpers/add-many");e.exports=r},{"./helpers/add-many":6,"./helpers/add-one":7}],2:[function(t,e,n){"use strict";function r(t){var e=this;return e.destroy().then(function(){t.emitter.emit("clear")})}e.exports=r},{}],3:[function(t,e,n){"use strict";function r(t){return this.allDocs({include_docs:!0}).then(function(e){var n=e.rows.filter(o).map(function(t){return i(t.doc)});return"function"==typeof t?n.filter(t):n})}var i=t("./utils/to-object"),o=t("./utils/isnt-design-doc");e.exports=r},{"./utils/isnt-design-doc":29,"./utils/to-object":32}],4:[function(t,e,n){"use strict";function r(t,e){return Array.isArray(t)?o.call(this,t):i.call(this,t,e)}var i=t("./helpers/find-or-add-one"),o=t("./helpers/find-or-add-many");e.exports=r},{"./helpers/find-or-add-many":11,"./helpers/find-or-add-one":12}],5:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?o.call(this,t):i.call(this,t)}var i=t("./helpers/find-one"),o=t("./helpers/find-many");e.exports=r},{"./helpers/find-many":9,"./helpers/find-one":10}],6:[function(t,e,n){"use strict";var r=t("../utils/to-doc");e.exports=function(t){var e=t.map(r);return this.bulkDocs(e).then(function(e){return e.map(function(e,n){return e instanceof Error?e:(t[n].id=e.id,t[n]._rev=e.rev,t[n])})})}},{"../utils/to-doc":30}],7:[function(t,e,n){"use strict";var r=t("../utils/to-doc");e.exports=function(t){var e=this.constructor.utils.Promise,n=this.constructor.Errors;if("object"!=typeof t)return e.reject(n.NOT_AN_OBJECT);var i=t.id?"put":"post";return this[i](r(t)).then(function(e){return t.id=e.id,t._rev=e.rev,t})}},{"../utils/to-doc":30}],8:[function(t,e,n){function r(t,e,n,r){return function(){return n.apply(t,arguments).then(function(t){return Array.isArray(t)?t.forEach(i.bind(null,e,r)):i(e,r,t),t})}}function i(t,e,n){e||(e=parseInt(n._rev,10)>1?"update":"add"),t.emitter.emit(e,n),t.emitter.emit("change",e,n)}e.exports=r},{}],9:[function(t,e,n){"use strict";var r=t("../utils/to-id"),i=t("../utils/to-object");e.exports=function(t){var e=this.constructor.Errors,n=t.map(r);return this.allDocs({keys:n,include_docs:!0}).then(function(t){var r=t.rows.reduce(function(t,e){return t[e.id]=e.doc,t},{}),o=n.map(function(t){var n=r[t];return n?n:e.MISSING_DOC});return o.map(i)})}},{"../utils/to-id":31,"../utils/to-object":32}],10:[function(t,e,n){"use strict";var r=t("../utils/to-id"),i=t("../utils/to-object");e.exports=function(t){var e=r(t);return this.get(e).then(i)}},{"../utils/to-id":31,"../utils/to-object":32}],11:[function(t,e,n){var r=t("../utils/to-id"),i=t("./find-many"),o=t("./add-many");e.exports=function(t){var e,n=this,s=t.map(r);return i.call(this,s).then(function(i){e=i;var s=e.map(r),u=t.reduce(function(t,e){return-1===s.indexOf(e.id)&&t.push(e),t},[]);return o.call(n,u)}).then(function(t){var n=[];return e.concat(t).forEach(function(t){var e=s.indexOf(t.id);n[e]=t}),n})}},{"../utils/to-id":31,"./add-many":6,"./find-many":9}],12:[function(t,e,n){var r=t("../utils/to-id"),i=t("./find-one"),o=t("./add-one");e.exports=function(t,e){var n=this,s=this.constructor.utils.Promise,u=this.constructor.Errors,c=r(t);return c&&(t!==c||e)?i.call(this,c)["catch"](function(){return"object"==typeof e?e.id=c:e=t,o.call(n,e)}):s.reject(u.MISSING_ID)}},{"../utils/to-id":31,"./add-one":7,"./find-one":10}],13:[function(t,e,n){"use strict";var r=t("pouchdb-extend"),i=t("../utils/change-object"),o=t("../utils/to-doc"),s=t("../utils/to-id"),u=t("./find-many");e.exports=function(t,e){var n,c=this,a=this.constructor.Errors,l=t.map(s);return u.call(this,t).then(function(n){return e?n.map(function(t){return t instanceof Error?t:i(e,t)}):n.map(function(e,n){var i=t[n];return e instanceof Error?e:"object"!=typeof i?a.NOT_AN_OBJECT:r(e,i)})}).then(function(t){n=t;var e=n.filter(function(t){return!(t instanceof Error)});return c.bulkDocs(e.map(o))}).then(function(t){return t.forEach(function(t){var e=l.indexOf(t.id);n[e]._rev=t.rev}),n})}},{"../utils/change-object":28,"../utils/to-doc":30,"../utils/to-id":31,"./find-many":9,"pouchdb-extend":22}],14:[function(t,e,n){"use strict";var r=t("pouchdb-extend"),i=t("../utils/change-object"),o=t("../utils/to-doc"),s=t("./find-one");e.exports=function(t,e){var n,u=this,c=this.constructor.utils.Promise,a=this.constructor.Errors;return"string"!=typeof t||e?s.call(this,t).then(function(n){return e?i(e,n):r(n,t)}).then(function(t){return n=t,u.put(o(n))}).then(function(t){return n._rev=t.rev,n}):c.reject(a.NOT_AN_OBJECT)}},{"../utils/change-object":28,"../utils/to-doc":30,"./find-one":10,"pouchdb-extend":22}],15:[function(t,e,n){var r=t("../utils/to-id"),i=t("./add-many"),o=t("./update-many");e.exports=function(t){var e,n=this,s=t.map(r);return i.call(this,t).then(function(r){e=r;var i=t.reduce(function(t,e,n){var i=r[n],o=i instanceof Error&&409===i.status;return o&&t.push(e),t},[]);return o.call(n,i)}).then(function(t){var n=[];return t.concat(e).forEach(function(t){var e=s.indexOf(t.id);-1!==e&&(n[e]=t)}),n})}},{"../utils/to-id":31,"./add-many":6,"./update-many":13}],16:[function(t,e,n){var r=t("../utils/to-id"),i=t("./add-one"),o=t("./update-one");e.exports=function(t,e){var n=this;return o.call(this,t,e)["catch"](function(o){if(404!==o.status)throw o;return e?(e.id=r(t),i.call(n,e)):i.call(n,t)})}},{"../utils/to-id":31,"./add-one":7,"./update-one":14}],17:[function(t,e,n){"use strict";function r(e){var n={emitter:e&&e.emitter||new i};return{db:this,add:o(this,n,t("./add")),find:t("./find").bind(this),findAll:t("./find-all").bind(this),findOrAdd:o(this,n,t("./find-or-add")),update:o(this,n,t("./update")),updateOrAdd:o(this,n,t("./update-or-add")),updateAll:o(this,n,t("./update-all")),remove:o(this,n,t("./remove"),"remove"),removeAll:o(this,n,t("./remove-all"),"remove"),on:t("./lib/on").bind(this,n),one:t("./lib/one").bind(this,n),off:t("./lib/off").bind(this,n),clear:t("./clear").bind(this,n)}}var n=e.exports={hoodieApi:r},i=t("events").EventEmitter,o=t("./helpers/eventify");"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{"./add":1,"./clear":2,"./find":5,"./find-all":3,"./find-or-add":4,"./helpers/eventify":8,"./lib/off":18,"./lib/on":19,"./lib/one":20,"./remove":24,"./remove-all":23,"./update":27,"./update-all":25,"./update-or-add":26,events:21}],18:[function(t,e,n){"use strict";function r(t,e,n){return t.emitter.removeListener(e,n),this}e.exports=r},{}],19:[function(t,e,n){"use strict";function r(t,e,n){return t.emitter.on(e,n),this}e.exports=r},{}],20:[function(t,e,n){"use strict";function r(t,e,n){return t.emitter.once(e,n),this}e.exports=r},{}],21:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];for(a=n.slice(),r=a.length,c=0;r>c;c++)a[c].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=o;u-->0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],22:[function(t,e,n){"use strict";function r(t){return null===t?String(t):"object"==typeof t||"function"==typeof t?a[h.call(t)]||"object":typeof t}function i(t){return null!==t&&t===t.window}function o(t){if(!t||"object"!==r(t)||t.nodeType||i(t))return!1;try{if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in t);return void 0===n||p.call(t,n)}function s(t){return"function"===r(t)}function u(){for(var t=[],e=-1,n=arguments.length,r=new Array(n);++e<n;)r[e]=arguments[e];var i={};t.push({args:r,result:{container:i,key:"key"}});for(var o;o=t.pop();)c(t,o.args,o.result);return i.key}function c(t,e,n){var r,i,u,c,a,l,d,f=e[0]||{},h=1,p=e.length,m=!1,y=/\d+/;for("boolean"==typeof f&&(m=f,f=e[1]||{},h=2),"object"==typeof f||s(f)||(f={}),p===h&&(f=this,--h);p>h;h++)if(null!=(r=e[h])){d=v(r);for(i in r)if(!(i in Object.prototype)){if(d&&!y.test(i))continue;if(u=f[i],c=r[i],f===c)continue;m&&c&&(o(c)||(a=v(c)))?(a?(a=!1,l=u&&v(u)?u:[]):l=u&&o(u)?u:{},t.push({args:[m,l,c],result:{container:f,key:i}})):void 0!==c&&(v(r)&&s(c)||(f[i]=c))}}n.container[n.key]=f}for(var a={},l=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],d=0;d<l.length;d++){var f=l[d];a["[object "+f+"]"]=f.toLowerCase()}var h=a.toString,p=a.hasOwnProperty,v=Array.isArray||function(t){return"array"===r(t)};e.exports=u},{}],23:[function(t,e,n){"use strict";function r(t){var e;return this.allDocs({include_docs:!0}).then(function(n){return e=n.rows.filter(s).map(function(t){return i(t.doc)}),"function"==typeof t&&(e=e.filter(t)),e.map(function(t){var e=o(t);return e._deleted=!0,e})}).then(this.bulkDocs.bind(this)).then(function(t){return t.map(function(t,n){return e[n]._rev=t.rev,e[n]})})}var i=t("./utils/to-object"),o=t("./utils/to-doc"),s=t("./utils/isnt-design-doc");e.exports=r},{"./utils/isnt-design-doc":29,"./utils/to-doc":30,"./utils/to-object":32}],24:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?o.call(this,t,{_deleted:!0}):i.call(this,t,{_deleted:!0})}var i=t("./helpers/update-one"),o=t("./helpers/update-many");e.exports=r},{"./helpers/update-many":13,"./helpers/update-one":14}],25:[function(t,e,n){"use strict";function r(t){var e,n=this.constructor.utils.Promise,r=typeof t;return"object"!==r&&"function"!==r?n.reject(new Error("Must provide object or function")):this.allDocs({include_docs:!0}).then(function(n){return e=n.rows.filter(u).map(function(t){return o(t.doc)}),"function"===r?(e.forEach(t),e.map(s)):e.map(function(e){return i(e,t),s(e)})}).then(function(t){return t}).then(this.bulkDocs.bind(this)).then(function(t){return t.map(function(t,n){return e[n]._rev=t.rev,e[n]})})}var i=t("pouchdb-extend"),o=t("./utils/to-object"),s=t("./utils/to-doc"),u=t("./utils/isnt-design-doc");e.exports=r},{"./utils/isnt-design-doc":29,"./utils/to-doc":30,"./utils/to-object":32,"pouchdb-extend":22}],26:[function(t,e,n){"use strict";function r(t,e){return Array.isArray(t)?o.call(this,t):i.call(this,t,e)}var i=t("./helpers/update-or-add-one"),o=t("./helpers/update-or-add-many");e.exports=r},{"./helpers/update-or-add-many":15,"./helpers/update-or-add-one":16}],27:[function(t,e,n){"use strict";function r(t,e){return"object"==typeof t||e?Array.isArray(t)?o.call(this,t,e):i.call(this,t,e):this.constructor.utils.Promise.reject(new Error("Must provide change"))}var i=t("./helpers/update-one"),o=t("./helpers/update-many");e.exports=r},{"./helpers/update-many":13,"./helpers/update-one":14}],28:[function(t,e,n){"use strict";var r=t("pouchdb-extend");e.exports=function(t,e){return"object"==typeof t?r(e,t):(t(e),e)}},{"pouchdb-extend":22}],29:[function(t,e,n){"use strict";e.exports=function(t){return null===t.id.match(/^_design/)}},{}],30:[function(t,e,n){"use strict";var r=t("pouchdb-extend");e.exports=function(t){var e=r({},t,{_id:t.id});return delete e.id,e}},{"pouchdb-extend":22}],31:[function(t,e,n){"use strict";e.exports=function(t){return"object"==typeof t?t.id:t}},{}],32:[function(t,e,n){"use strict";var r=t("pouchdb-extend");e.exports=function(t){if(t instanceof Error)return t;var e=r({},t,{id:t._id});return delete e._id,e}},{"pouchdb-extend":22}]},{},[17]);
